<!--
  @description       : 
  @author            : Ali Siddiqui
  @group             : 
  @last modified on  : 08-21-2024
  @last modified by  : Ali Siddiqui
  Modifications Log
  Ver   Date         Author         Modification
  1.0   08-14-2024   Ali Siddiqui   Initial Version
-->
<template>
    <lightning-card title="Create Work Orders">
        <lightning-button label="Add Row" onclick={handleAddRow}></lightning-button>
        <template if:true={isDataReady}>
            <table class="slds-table slds-table_cell-buffer slds-table_bordered">
                <thead>
                    <tr>
                        <th>Service</th>
                        <th>Unit</th>
                        <th>Price</th>
                        <th>Sq Ft</th>
                        <th>Total Price</th>
                        <th>Start Date Time</th>
                        <th>End Date Time</th> 
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <template for:each={tableData} for:item="row">
                        <tr key={row.id}>
                            <td>
                                <lightning-combobox
                                    name="service"
                                    data-id={row.id}
                                    value={row.service}
                                    options={servicesOptions}
                                    placeholder="Select Service"
                                    onchange={handlePicklistChange}>
                                </lightning-combobox>
                            </td>
                            <td>
                                <lightning-combobox
                                    name="unit"
                                    data-id={row.id}
                                    value={row.unit}
                                    options={unitsOptions}
                                    placeholder="Select Unit"
                                    onchange={handlePicklistChange}>
                                </lightning-combobox>
                            </td>
                            <td>
                                <lightning-input
                                    type="Text"
                                    data-id={row.id}
                                    name="price"
                                    value={row.price}
                                    onchange={handleInputChange}>
                                </lightning-input>
                            </td>
                            <td>
                                <lightning-input
                                    type="Text"
                                    data-id={row.id}
                                    name="sqft"
                                    value={row.sqft}
                                    onchange={handleInputChange}>
                                </lightning-input>
                            </td>
                            <td>
                                <lightning-input
                                    type="Text"
                                    data-id={row.id}
                                    name="totalPrice"
                                    value={row.totalPrice}
                                    onchange={handleInputChange}>
                                </lightning-input>
                            </td>
                            <td>
                                <lightning-input
                                    type="datetime-local"
                                    data-id={row.id}
                                    name="startDateTime"
                                    value={row.startDateTime}
                                    onchange={handleInputChange}>
                                </lightning-input>
                            </td>
                            <td>
                                <lightning-input
                                    type="datetime-local"
                                    data-id={row.id}
                                    name="endDateTime"
                                    value={row.endDateTime}
                                    onchange={handleInputChange}>
                                </lightning-input>
                            </td>

                             
                            <td>
                                <lightning-button-icon
                                    icon-name="utility:delete"
                                    alternative-text="Delete"
                                    onclick={handleDeleteRow}
                                    data-id={row.id}>
                                </lightning-button-icon>
                            </td>
                        </tr>
                    </template>
                </tbody>
            </table>
            <lightning-button label="Save Work Orders" onclick={handleSave}></lightning-button>
        </template>
        <template if:false={isDataReady}>
            <lightning-spinner alternative-text="Loading..."></lightning-spinner>
        </template>
    </lightning-card>
</template>